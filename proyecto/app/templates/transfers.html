{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inicio</title>
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/transfers.css' %}">
</head>
<body>
    <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="{% static 'img/slide1.jpg' %}" class="d-block w-100" alt="...">
            </div>
            <div class="carousel-item">
                <img src="{% static 'img/slide2.jpg' %}" class="d-block w-100" alt="...">
            </div>
            <div class="carousel-item">
                <img src="{% static 'img/slide3.jpg' %}" class="d-block w-100" alt="...">
            </div>
        </div>
    </div>

    <div class="custom-square">
        <h1>Transfers Disponibles</h1>

        <div class="dropdown">
            <button class="dropbtn">Filtrar</button>
            <div class="dropdown-content">
                <form id="filter-form" action="{% url 'transfers' %}" method="GET">
                    <label for="marca">Marca:</label>
                    <select id="marca" name="marca">
                        <option value="">Seleccionar</option>
                        {% for marca in marcas %}
                            <option value="{{ marca }}" {% if request.GET.marca == marca %}selected{% endif %}>{{ marca }}</option>
                        {% endfor %}
                    </select>

                    <label for="modelo">Modelo:</label>
                    <select id="modelo" name="modelo">
                        <option value="">Seleccionar</option>
                        {% for modelo in modelos %}
                            <option value="{{ modelo }}" {% if request.GET.modelo == modelo %}selected{% endif %}>{{ modelo }}</option>
                        {% endfor %}
                    </select>

                    <label for="capacidad">Capacidad mínima:</label>
                    <input type="number" id="capacidad" name="capacidad" min="1" value="{{ request.GET.capacidad }}">

                    <button type="submit">Aplicar Filtro</button>
                </form>
            </div>
        </div>
        
        <div class="transfers-container">
            {% for transfer in transfers %}
            <div class="transfer-card">
                <img src="{{ transfer.foto.url }}" alt="Foto del Transfer">
                <p>{{ transfer.marca }} {{ transfer.modelo }}</p>

                <div class="mas_info">
                    <p>Capacidad: {{ transfer.capacidad }}</p>
                    <p>Empresa: {{ transfer.empresa }}</p>
                    <p>Conductor: {{ transfer.conductor }}</p>
                </div>

                <button class="reservar_btn">Reservar</button>
                <button class="mas_info_btn">Ver más</button>
            </div>
            {% empty %}
                <p>No se encontraron transfers que coincidan con los filtros.</p>
            {% endfor %}
        </div>
    </div>
    
    <script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
    <script src="{% static 'js/transfer.js' %}"></script>
</body>
</html>